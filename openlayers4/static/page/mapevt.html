<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <link rel="stylesheet" href="../js/public/ol4/v4.6.5-dist/ol.css" type="text/css">
  <style>
    head,body{
        margin: 0%;
        background-color: black;
      }
    #map{
      width: 100%;
      height: 80%;
      margin: 0%;
      position: relative;
    }
    #windyInfo{
      background-color: brown;

    }
    .mao{
      display: inline;
    }
  </style>
  <script src="../js/public/jquery/jquery/jquery-3.3.1.min.js"></script>
  <script src="../js/public/ol4/v4.6.5-dist/ol.js"></script>
</head>
<body>
  <div>
    <button type="button" onclick="registerEvt()">注册事件</button>
    <button type="button" onclick="unregisterEvt()">清除事件</button>
  </div>
  <div id="map"></div>
  <script>
    var map = new ol.Map({
      target: 'map',
      layers: [
        new ol.layer.Tile({
          source: new ol.source.TileWMS({
            url: 'http://10.192.43.161:8080/geoserver/fenyang/wms',
            params: {
              'LAYERS': 'fenyang:fenyang_map',
              'TILE': true
            }
            
          })
        })
      ],
      view: new ol.View({
        projection: 'EPSG:4326',
        zoom: 10,
        center: [111.87, 37.29]
      })
    })
    var infoDiv = document.createElement('div')
    infoDiv.id = 'windyInfo'
    var overlay = new ol.Overlay({
      element: infoDiv,
      className: 'mao',
      positioning: 'center-left',
      autoPan: true,
      stopEvent: false,
      autoPanAnimation: {
        duration: 250
      }
    })
    map.addOverlay(overlay)

    function registerEvt() {
      map.on('pointermove', mapEvtHandle)
    }

    function unregisterEvt() {
      infoDiv.innerText = ''
      map.un('pointermove',mapEvtHandle)
    }

    function mapEvtHandle(evt) {
      var coord = evt.coordinate
      infoDiv.innerText = `${coord[0]},${coord[1]}`
    }

  </script>
</body>
</html>